@{
    ViewBag.Title = "Cookies on GOV.UK";
    ViewBag.pageClass = "cookies-settings";
}

@model SFB.Web.UI.Models.CookiePolicyModel

<div class="govuk-grid-row">
    <div class="group help-page cookie-settings govuk-grid-column-full">

        <div class="govuk-notification-banner govuk-notification-banner--success cookie-settings__confirmation" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner" style="display:none">
            <div class="govuk-notification-banner__header">
                <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                    Success
                </h2>
            </div>
            <div class="govuk-notification-banner__content">
                <p class="govuk-notification-banner__heading">
                    You’ve set your cookie preferences. <a class="govuk-notification-banner__link" href="@ViewBag.referrer">Go back to the page you were looking at</a>.
                </p>
            </div>
        </div>

        <h1 class="govuk-heading-xl page-heading">
            Cookies
        </h1>

        <div>
            <p class="govuk-body">Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>
            <p class="govuk-body">We use cookies to make Schools financial benchmarking work and collect information about how you use our service.</p>
        </div>

        <h2 class="govuk-heading-m govuk-!-margin-top-6">Essential cookies</h2>

        <p class="govuk-body">These essential cookies remember selections on Schools financial benchmarking as well as keeping your information secure while you use the site. We do not need to ask permission to use them.</p>

        <table class="govuk-table govuk-table">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header left">Name</th>
                    <th scope="col" class="govuk-table__header left">Purpose</th>
                    <th scope="col" class="govuk-table__header left">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">sfb_comparison_list</td>
                    <td class="govuk-table__cell left">Stores your selection of schools to benchmark</td>
                    <td class="govuk-table__cell left">Does not expire</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">sfb_comparison_list_mat</td>
                    <td class="govuk-table__cell left">Stores your selection of trusts to benchmark</td>
                    <td class="govuk-table__cell left">Does not expire</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">sfb_comparison_list_manual</td>
                    <td class="govuk-table__cell left">Temporarily stores your selection of schools to benchmark during your manual comparison</td>
                    <td class="govuk-table__cell left">Expires at the end of your session</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">YourCharts</td>
                    <td class="govuk-table__cell left">Keeps your selection of charts for your customised report on "Your charts" tab in Benchmarking charts page</td>
                    <td class="govuk-table__cell left">Does not expire (Local storage)</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">urn#[x]-scenario_[x]</td>
                    <td class="govuk-table__cell left">Keeps your customized scenarios you have created or edited in Self Assessment Dashboard</td>
                    <td class="govuk-table__cell left">Does not expire (Local storage)</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">__RequestVerificationToken</td>
                    <td class="govuk-table__cell left">This is an anti-forgery cookie set by web applications built using ASP.NET MVC technologies.</td>
                    <td class="govuk-table__cell left">Expires at the end of your session</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">ARRAffinity</td>
                    <td class="govuk-table__cell left">This cookie is set by websites run on the Windows Azure cloud platform and used for load balancing.</td>
                    <td class="govuk-table__cell left">Expires at the end of your session</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">cookies_policy</td>
                    <td class="govuk-table__cell left">Saves your cookie consent settings</td>
                    <td class="govuk-table__cell left">1 year</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">cookies_preferences_set</td>
                    <td class="govuk-table__cell left">Lets us know that you’ve saved your cookie consent settings</td>
                    <td class="govuk-table__cell left">1 year</td>
                </tr>
            </tbody>
        </table>

        <hr class="govuk-section-break" />
        <h2 class="govuk-heading-m govuk-!-margin-top-6">Functional cookies (optional)</h2>
        <p class="govuk-body">These cookies remember your preferences and choices you make to personalise your experience of Schools financial benchmarking, but they are not essential to make the site work.</p>
        <table class="govuk-table govuk-table">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header left">Name</th>
                    <th scope="col" class="govuk-table__header left">Purpose</th>
                    <th scope="col" class="govuk-table__header left">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">suppress-recruitment-banner</td>
                    <td class="govuk-table__cell left">Lets us know that you've seen our message about getting involved on our usability testing</td>
                    <td class="govuk-table__cell left">180 days</td>
                </tr>
            </tbody>
        </table>

        <hr class="govuk-section-break" />
        <h2 class="govuk-heading-m govuk-!-margin-top-6">Analytics cookies (optional)</h2>
        <p class="govuk-body">With your permission, we use Google Analytics to collect data about how you use Schools financial benchmarking. This information helps us to improve our service.</p>
        <p class="govuk-body">Google is not allowed to use or share our analytics data with anyone.</p>
        <p class="govuk-body">Google Analytics stores anonymised information about:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>the pages you visit</li>
            <li>how long you spend on each page</li>
            <li>how you got to the site</li>
            <li>what you click on while you’re visiting</li>
        </ul>
        <table class="govuk-table govuk-table">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header left">Name</th>
                    <th scope="col" class="govuk-table__header left">Purpose</th>
                    <th scope="col" class="govuk-table__header left">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">_ga</td>
                    <td class="govuk-table__cell left">This helps us count how many people visit GOV.UK by tracking if you’ve visited before</td>
                    <td class="govuk-table__cell left">2 years</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">_gid</td>
                    <td class="govuk-table__cell left">This helps us count how many people visit GOV.UK by tracking if you’ve visited before</td>
                    <td class="govuk-table__cell left">24 hours</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell left">_gat</td>
                    <td class="govuk-table__cell left">Used to manage the rate at which page view requests are made</td>
                    <td class="govuk-table__cell left">1 minute</td>
                </tr>
            </tbody>
        </table>

    </div>
</div>

<div class="govuk-grid-row govuk-!-margin-top-6">
    <div class="govuk-grid-column-two-thirds">
        <h2 class="govuk-heading-m">Change your cookie settings</h2>
        <form id="cookie-settings-form">

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        Do you want to accept functional cookies?
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="functional-cookies" name="settings" type="radio" value="on" checked="@Model.Settings">
                            <label class="govuk-label govuk-radios__label" for="functional-cookies">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="functional-cookies-2" name="settings" type="radio" value="off" checked="@(!Model.Settings)">
                            <label class="govuk-label govuk-radios__label" for="functional-cookies-2">
                                No
                            </label>
                        </div>
                    </div>

                </fieldset>
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        Do you want to accept analytics cookies?
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="analytics-cookies" name="usage" type="radio" value="on" checked="@Model.Usage">
                            <label class="govuk-label govuk-radios__label" for="analytics-cookies">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="analytics-cookies-2" name="usage" type="radio" value="off" checked="@(!Model.Usage)">
                            <label class="govuk-label govuk-radios__label" for="analytics-cookies-2">
                                No
                            </label>
                        </div>
                    </div>

                </fieldset>
            </div>

            <button class="govuk-button" data-module="govuk-button" id="cookie-settings-button">
                Save cookie settings
            </button>
        </form>
    </div>
</div>

@section ViewScripts{
    <script>
        $("#cookie-settings-button").click(function (event) {
            event.preventDefault();
            var form = DfE.Util.getFormData($('#cookie-settings-form'));
            var cookiesPolicyCookie = { "essential": true, "settings": form.settings === "on", "usage": form.usage === "on" };
            GOVUK.setDomainCookie("cookies_policy", JSON.stringify(cookiesPolicyCookie), { days: 365 }, '@System.Configuration.ConfigurationManager.AppSettings["cookieDomain"]');
            GOVUK.setDomainCookie("cookies_preferences_set", "true", { days: 365 }, '@System.Configuration.ConfigurationManager.AppSettings["cookieDomain"]');
            $(".cookie-settings__confirmation").show();
            $("header").get(0).scrollIntoView();
        });
    </script>
}


