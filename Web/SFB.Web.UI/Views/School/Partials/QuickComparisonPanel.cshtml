@using SFB.Web.ApplicationCore.Helpers.Enums
@model SFB.Web.UI.Models.SchoolViewModel
<div ng-if="compList.count > 0">
    <h3 class="govuk-heading-m">
        A quick comparison of this school’s expenditure against similar schools
    </h3>

    <details class="govuk-details" data-module="govuk-details">
        <summary class="govuk-details__summary hide-in-print">
            <span class="govuk-details__summary-text govuk-!-font-size-16">
                View characteristics used
            </span>
        </summary>
        <div class="govuk-details__text govuk-!-font-size-16 show-in-print" id="qc_criteriaTables">
            <table id="criteriaTable" class="govuk-table govuk-!-font-size-16">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header">Characteristic</th>
                        <th scope="col" class="govuk-table__header">Default school value</th>
                        <th scope="col" class="govuk-table__header">Comparison criteria</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Finance type</td>
                        @if (Model.EstablishmentType == EstablishmentType.Academies)
                        {
                            <td class="govuk-table__cell">Academy</td>
                        }
                        else
                        {
                            <td class="govuk-table__cell">Maintained</td>
                        }
                        <td class="govuk-table__cell">@Model.EstablishmentType</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Number of pupils</td>
                        <td class="govuk-table__cell">@Model.TotalPupils</td>
                        <td class="govuk-table__cell">{{compList.criteria.MinNoPupil}} - {{compList.criteria.MaxNoPupil}}</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">School phase</td>
                        <td class="govuk-table__cell">@Model.OverallPhase</td>
                        <td class="govuk-table__cell">{{compList.criteria.SchoolOverallPhase[0]}}</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Urban / rural location</td>
                        <td class="govuk-table__cell">@Model.UrbanRural</td>
                        <td class="govuk-table__cell">{{compList.criteria.UrbanRural.toString()}}</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Percentage of pupils eligible for free school meals</td>
                        <td class="govuk-table__cell">@decimal.Round(Model.FSM.GetValueOrDefault(), 2, MidpointRounding.AwayFromZero)%</td>
                        <td class="govuk-table__cell">{{compList.criteria.MinPerFSM}}% - {{compList.criteria.MaxPerFSM}}%</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Pupils with special educational needs who have statements or education and health care plans</td>
                        <td class="govuk-table__cell">@decimal.Round(Model.SEN.GetValueOrDefault(), 2, MidpointRounding.AwayFromZero)%</td>
                        <td class="govuk-table__cell">{{compList.criteria.MinPerSEN}}% - {{compList.criteria.MaxPerSEN}}%</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Pupils with English as an additional language</td>
                        <td class="govuk-table__cell">@decimal.Round(Model.EAL.GetValueOrDefault(), 2, MidpointRounding.AwayFromZero)%</td>
                        <td class="govuk-table__cell">{{compList.criteria.MinPerEAL}}% - {{compList.criteria.MaxPerEAL}}%</td>
                    </tr>                    
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">Within your local authority</td>
                        <td class="govuk-table__cell">-</td>
                        <td class="govuk-table__cell">No</td>
                    </tr>
                </tbody>
            </table>            
        </div>
    </details>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <nav class="app-navigation app-navigation--gray-back govuk-clearfix govuk-!-margin-bottom-6" id="qcNav">
                <ul class="app-navigation__list app-width-container" role="tablist">
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print app-navigation__list-item--current" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="true"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Total expenditure', event, this)"
                           href="#benchmarkChartsList"><span class="test">Total expenditure</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Staff total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Staff</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Premises total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Premises</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Occupation total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Occupation</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Supplies and services total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Supplies and services</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Cost of finance total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Cost of finance</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Community expenditure total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Community expenditure</span></a>
                    </li>
                    <li class="app-navigation__list-item app-navigation__list-item--multiple-rows hide-in-print" role="presentation">
                        <a role="tab" aria-controls="benchmarkChartsList" aria-selected="false"
                           class="govuk-link govuk-link--no-visited-state govuk-link--no-underline app-navigation__link"
                           onclick="DfE.Views.SchoolDetailsViewModel.changeQcTab('Special facilities total', event, this)"
                           href="#benchmarkChartsList"><span class="test">Special facilities</span></a>
                    </li>
                </ul>
            </nav>
            <div id="benchmarkChartsList"></div>
            <div class="govuk-!-margin-top-4 govuk-!-display-inline-block govuk-body">See the <a class="govuk-link" href="/BenchmarkCharts/GenerateFromSimpleCriteria?Urn=@Model.Id&EstType=@Model.EstablishmentType&ComparisonType=Basic&SimpleCriteria.IncludeFsm=true&SimpleCriteria.IncludeSen=true&SimpleCriteria.IncludeEal=true">full version</a> of this quick comparison</div>
        </div>
    </div>
</div>
