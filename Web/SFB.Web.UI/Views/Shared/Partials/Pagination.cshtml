@using SFB.Web.UI.Helpers.Constants;
@model SFB.Web.UI.Models.Pagination

<div class="grid-row pagination-container">
    <div class="column-full">
        <div id="result-list" class="inline-block">
            <div id="js-search-results-info">
                <div class="result-info">
                    @if (@ViewBag.CompanyNo == null)
                    {
                        <div class="summary count-summary font-xsmall ">
                            Showing @(Model.Start) - @(Model.End) of <span class="bold-xsmall result-count">@(Model.Total)</span> schools
                            @if (ViewBag.SearchMethod == "Manual")
                            {
                                <span id="manualSchoolCountPlaceHolder" class="no-padding inline-block font-xsmall">- <span id="manualCount" class="bold-xsmall">@(ViewBag.manualCount ?? 0)</span> selected (max. 30)</span>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="summary">
                            <span class="bold result-count">Showing @(Model.Total)</span> schools in <a href="/Trust?companyNo=@ViewBag.CompanyNo&name=@ViewBag.MatName">@ViewBag.MatName</a>
                        </p>
                    }
                </div>
            </div>
        </div>

        @if (Model.Total > SFB.Web.UI.Helpers.Constants.SearchDefaults.RESULTS_PER_PAGE)
        {
            <div class="pagination-links no-padding font-xsmall inline-block">
                @if (Model.PageCount > 1)
                {
                    if (Model.HasPreviousPage())
                    {
                        <a class="pagination-page-link" href="@(Model.ConstructPageUrl(Model.CurrentPage - 1))">Previous</a>
                    }

                    var pageCount = Math.Min(Model.PageCount, SearchDefaults.LINKS_PER_PAGE);
                    var startPageLinkNo = Math.Max(1, Model.CurrentPage - SearchDefaults.LINKS_PER_PAGE + 1);
                    var endPageLinkNo = Math.Min(Model.PageCount, startPageLinkNo + pageCount - 1);
                    for (var i = startPageLinkNo; i <= endPageLinkNo; i++)
                    {
                        if (i == Model.CurrentPage)
                        {
                            <span class="pagination-page-link">@i</span>
                        }
                        else
                        {
                            <a class="pagination-page-link" href="@(Model.ConstructPageUrl(i))">@i</a>
                        }
                    }

                    if (Model.HasMorePages())
                    {
                        <a class="pagination-page-link" href="@(Model.ConstructPageUrl(Model.CurrentPage + 1))">Next</a>
                    }
                }
            </div>
        }
    </div>
 </div>